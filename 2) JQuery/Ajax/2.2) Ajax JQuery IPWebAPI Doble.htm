<!DOCTYPE html>
<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
<script type="text/javascript">
					
	function Ajax_JQuery() {
		try {
			$.ajax({
				url: 'https://jsonip.com'
			})
			.done(function (data) {
				ImprTablaJson(data);
			});
		} catch (err) {
			alert(err);
		}// fin catch
	}//fin Ajax_Completo ==============================
	
	function Ajax_getJSON() {
		$.getJSON('http://ip-api.com/json',
		function (data) {
			ImprTablaJson2(data);
		});//end 
	}//Fin Ajax_getJSON =========================
		
	function ImprTablaJson(ObjetoJSON) {
		document.write("<h2>Ejemplo de Web Service que obtiene la IP</h2>");
		document.write("<h3>Llamado con la función $.ajax de JQuery</h3>");
		document.write("<table border=1><tr><th>IP</th></tr>");
		document.write("<tr><td>");
		document.write(ObjetoJSON.ip);
		document.write("</td></tr>");
		document.write("</table>");
	}//Fin ImprTablaJson ================================================
	
	function ImprTablaJson2(ObjetoJSON) {
		document.write("<h2>Ejemplo de otro Web Service que obtiene la IP</h2>");
		document.write("<h3>Llamado con la función $.getJSON de JQuery</h3>");
		document.write("<table border=1><tr> <th>IP</th> <th>Latitud</th> <th>Longitud</th> </tr>");
		
	    document.write("<tr><td>");
		document.write(ObjetoJSON.query);
		document.write("</td>");

		document.write("<td>");
		document.write(ObjetoJSON.lat);
		document.write("</td>");

		document.write("<td>");
		document.write(ObjetoJSON.lon);
		document.write("</td></tr>");


		document.write("</table>");
	}//Fin ImprTablaJson ================================================
			
	Ajax_JQuery();
	Ajax_getJSON();
</script>	
</body>
</html>

